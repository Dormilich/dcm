mixin print(__data)
	p!=JSON.stringify(__data)

!!! 5
html(lang="de")
	head
		title Rituale hinzufügen
		link(rel="stylesheet", type="text/css", href="/show.css")
		link(rel="stylesheet", type="text/css", href="/nav-edit.css")
		script(src="/jquery-2.0.3.min.js")
		style.
			label[for] {
				cursor: pointer;
			}
	body
		a#top
		nav
			a(href="#top") [Seitenanfang]
			a(href="#save") [speichern]
			a(href="/held/"+_id)= "⇒ "+Person.Name.split(' ')[0]
		
		h1.mitte
			a(href="/held/"+_id)= Person.Name
		
		form(action="/ritual/"+_id, method="post", accept-charset="utf-8")
			input(type="hidden", name="_method", value="put")
			
			a#ritualkenntnis
			section
				table.data-section.eigenschaften
					caption Ritualkenntnis
					colgroup
						col(style="width: 2em;")
						col
						col
						col(span="2", style="width: 10em;")
					thead
						tr
							td
							th Ritualkenntnis
							th Tradition
							th Lernstufe
							th RkW
					tfoot
						tr
							td
							td.mitte
								select(size="1")
									each __long, __short in _data.Ritualkenntnis
										if typeof __long === "string"
											option(data-long=__long, data-short=__short)=__long
									optgroup(label="Zaubertänzer")
										each __long, __short in _data.Ritualkenntnis.Zaubertänzer
											option(data-long="Zaubertänzer", data-short="Ztz", data-rep-short=__short, data-rep-long=__long)=__long
									optgroup(label="Schamanen")
										each __long, __short in _data.Ritualkenntnis.Schamane
											option(data-long="Schamane", data-short="Scm", data-rep-short=__short, data-rep-long=__long)=__long
							td
							td.mitte(colspan="2")
								button#addrk(type="button") neue Ritualkenntnis
					tbody#tmpl-allg
						tr
							td.mitte(style="padding: 0;")
								input.isactive(type="checkbox", id="rk_{index}", name="Magie.Ritualkenntnis[{index}][short]", value="Mag")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][long]", value="Gildenmagier")
							td
								label(for="rk_{index}") Gildenmagier
							td
							td.mitte
								select.unlock(size="1", name="Magie.Ritualkenntnis[{index}][Lernstufe]")
									each kat in ["A+", "A", "B", "C", "D", "E", "F", "G", "H"]
										option= kat
							td.mitte
								input.unlock.mitte(type="number", name="Magie.Ritualkenntnis[{index}][RkW]", min="3", max="35", step="1", value="3")
					tbody#tmpl-tanz
						tr
							td.mitte(style="padding: 0;")
								input.isactive(type="checkbox", id="zt_{index}", name="Magie.Ritualkenntnis[{index}][short]", value="Ztz")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][long]", value="Zaubertänzer")
							td
								label(for="zt_{index}") Zaubertänzer
							td 
								label(for="zt_{index}") Tulamidische Sharisad
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][tradition]" value="Tul")
							td.mitte
								select.unlock(size="1", name="Magie.Ritualkenntnis[{index}][Lernstufe]")
									each kat in ["A+", "A", "B", "C", "D", "E", "F", "G", "H"]
										option= kat
							td.mitte
								input.unlock.mitte(type="number", name="Magie.Ritualkenntnis[{index}][RkW]", min="3", max="35", step="1", value="3")
					tbody#tmpl-schm
						tr
							td.mitte(style="padding: 0;", rowspan="4")
								input.isactive(type="checkbox", id="sr_{index}")
							td
								label Geister binden
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][_talent]", value="...")
							td 
								label(for="sr_{index}") Ork-Schamane
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][short]", value="Scm")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][long]",  value="Schamane")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][tradition]" value="Ork")
							td.mitte
								select.unlock(size="1", name="Magie.Ritualkenntnis[{index}][Lernstufe]")
									each kat in ["A+", "A", "B", "C", "D", "E", "F", "G", "H"]
										option= kat
							td.mitte
								input.unlock.mitte(type="number", name="Magie.Ritualkenntnis[{index}][RkW]", min="3", max="35", step="1", value="3")
						tr
							td
								label Geister rufen
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][_talent]", value="...")
							td 
								label(for="sr_{index}") Ork-Schamane
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][short]", value="Scm")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][long]",  value="Schamane")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][tradition]" value="Ork")
							td.mitte
								select.unlock(size="1", name="Magie.Ritualkenntnis[{index}][Lernstufe]")
									each kat in ["A+", "A", "B", "C", "D", "E", "F", "G", "H"]
										option= kat
							td.mitte
								input.unlock.mitte(type="number", name="Magie.Ritualkenntnis[{index}][RkW]", min="3", max="35", step="1", value="3")
						tr
							td
								label Geister bannen
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][_talent]", value="...")
							td 
								label(for="sr_{index}") Ork-Schamane
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][short]", value="Scm")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][long]",  value="Schamane")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][tradition]" value="Ork")
							td.mitte
								select.unlock(size="1", name="Magie.Ritualkenntnis[{index}][Lernstufe]")
									each kat in ["A+", "A", "B", "C", "D", "E", "F", "G", "H"]
										option= kat
							td.mitte
								input.unlock.mitte(type="number", name="Magie.Ritualkenntnis[{index}][RkW]", min="3", max="35", step="1", value="3")
						tr
							td
								label Geister aufnehmen
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][_talent]", value="...")
							td 
								label(for="sr_{index}") Ork-Schamane
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][short]", value="Scm")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][long]",  value="Schamane")
								input.unlock(type="hidden", name="Magie.Ritualkenntnis[{index}][tradition]" value="Ork")
							td.mitte
								select.unlock(size="1", name="Magie.Ritualkenntnis[{index}][Lernstufe]")
									each kat in ["A+", "A", "B", "C", "D", "E", "F", "G", "H"]
										option= kat
							td.mitte
								input.unlock.mitte(type="number", name="Magie.Ritualkenntnis[{index}][RkW]", min="3", max="35", step="1", value="3")
		script.
			$('tbody select').each(function() {
				this.value = "E";
			});
