!!! 5
html(lang="de")
	head
		meta(charset="utf-8")
		title #{Person.Name.split(' ')[0]} bearbeiten
		link(rel="stylesheet", type="text/css", href="/edit.css")
		link(rel="stylesheet", type="text/css", href="/nav.css")
		script(type="text/javascript", src="/jquery-2.0.3.min.js")
		style.
			.setting tbody tr:nth-child(odd) {
				background-color: #eee;
			}
	body
		nav
			ul#main-menu
				li
					a(href="#top") [Seitenanfang]
				li
					a(href="#save") [speichern]
				li
					a(href="/held/"+_id, title="Heldenbogen")= "⇒ "+Person.Name.split(' ')[0]
		header#top
			h1.mitte
				a(href="/held/"+_id)= Person.Name
		
		main
			form(action="/basiswerte/"+_id, method="post", accept-charset="utf-8")#newChar
				input(type="hidden", name="_method", value="put")
			
				table.data-section.talente#bas
					caption Basiswerte
					colgroup
						col(style="width: 40%")
						col(span="3" style="width: 20%")
					thead
						tr
							th Eigenschaft
							th Modifikator
							th gekauft
							th maximal
					tbody
						tr
							td Lebensenergie
							td 
								input(name="modifikatoren[LeP][start]", type="number", min="0", step="1", value=modifikatoren.LeP.start)
							td
								input(name="modifikatoren[LeP][add]",   type="number", min="0", step="1", value=modifikatoren.LeP.add)
							td
								input(name="modifikatoren[LeP][max]",   type="number", min="0", step="1", value=modifikatoren.LeP.max)
						tr
							td Ausdauer
							td 
								input(name="modifikatoren[AuP][start]", type="number", min="0", step="1", value=modifikatoren.AuP.start)
							td
								input(name="modifikatoren[AuP][add]",   type="number", min="0", step="1", value=modifikatoren.AuP.add)
							td
								input(name="modifikatoren[AuP][max]",   type="number", min="0", step="1", value=modifikatoren.AuP.max)
						unless modifikatoren.AsP
							- modifikatoren.AsP = { start: '', add: '', max: '' }
						tr
							td#asp(title="Zum (De-)Aktivieren klicken") Astralenergie
							td 
								input(name="modifikatoren[AsP][start]", type="number", step="1", value=modifikatoren.AsP.start)
							td
								input(name="modifikatoren[AsP][add]",   type="number", min="0", step="1", value=modifikatoren.AsP.add)
							td
								input(name="modifikatoren[AsP][max]",   type="number", min="0", step="1", value=modifikatoren.AsP.max)
						unless modifikatoren.KaP
							- modifikatoren.KaP = { start: '', add: '' }
						tr
							td#kap(title="Zum (De-)Aktivieren klicken") Karmaenergie
							td 
								input(name="modifikatoren[KaP][start]", type="number", min="0", step="1", value=modifikatoren.KaP.start)
							td
								input(name="modifikatoren[KaP][add]",   type="number", min="0", step="1", value=modifikatoren.KaP.add)
							td
						tr
							td Magieresistenz
							td 
								input(name="modifikatoren[MR][start]", type="number", min="-10", max="10", step="1", value=modifikatoren.MR.start)
							td
								input(name="modifikatoren[MR][add]",   type="number", min="0", step="1", value=modifikatoren.MR.add)
							td
								input(name="modifikatoren[MR][max]",   type="number", min="0", step="1", value=modifikatoren.MR.max)
						tr
							td Initiative
							td
								input(name="modifikatoren[INI]", type="number", step="1", value=modifikatoren.INI)
							td(colspan="2")
						tr
							td Wundschwelle
							td
								input(name="modifikatoren[WS]", type="number", step="1", value=modifikatoren.WS)
							td(colspan="2")
						tr
							td Geschwindigkeit
							td
								input(name="modifikatoren[GS]", type="number", step="1", value=modifikatoren.GS)
							td(colspan="2")
				.mitte#save
					button(type="submit", disabled) speichern
					button(type="reset")  zurücksetzen
				
		script.
			$('#asp, #kap').on("click", function() {
				var $inputs = $(this).closest('tr').find('input');
				$inputs.prop('disabled', !$inputs.prop('disabled'));
			});
			if (#{!modifikatoren.AsP.max}) {
				$('#asp').closest('tr').find('input').prop('disabled', true);
			}
			if (#{!modifikatoren.KaP.start}) {
				$('#kap').closest('tr').find('input').prop('disabled', true);
			}
			$('button:disabled').prop('disabled', false);