include ../inc-mixins

doctype html
html(lang="de")
	head
		include ../inc-bootstrap
		title #{_Held.Person.Name.split(' ')[0]} bearbeiten – Basiswerte
		link(rel="stylesheet", href="/css/dcm-display.css")
		style.
			body {
				padding-top:      60px;
			}
			.dcm-gap-bottom {
				margin-bottom:    1em;
			}
			/* overwrite */
			.form-group {
				margin-top:       7px;
				margin-bottom:    8px;
			}
	body#top
		include inc/nav
		header.container
			.page-header.text-center
				h1=_Held.Person.Name
		main.container
			form.form-horizontal(action="/attribute/"+_Held._id, method="post", accept-charset="utf-8")
				input(type="hidden", name="_method", value="put")
				// Basiswerte
				section.panel.panel-default#bas
					.panel-heading.dcm-caption Basiswerte
					.panel-body
						.container-fluid.text-center.dcm-gap-bottom
							.row.dcm-row
								.col-sm-4
									.dcm-header.dcm-border Eigenschaft
								.col-sm-7.col-sm-offset-1
									.row
										.col-sm-4
											.dcm-header.dcm-border Modifikator
										.col-sm-4
											.dcm-header.dcm-border gekauft
										.col-sm-4
											.dcm-header.dcm-border maximal
						.container-fluid.dcm-striped
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label Lebensenergie:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												label.sr-only(for="lep-1") Lebensenergie (Startwert)
												input.form-control.text-center#lep-1(name="modifikatoren[LeP][start]", type="number", min="0", step="1", value=_Held.modifikatoren.LeP.start)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="lep-2") Lebensenergie (zugekauft)
												input.form-control.text-center#lep-2(name="modifikatoren[LeP][add]", type="number", min="0", step="1", value=_Held.modifikatoren.LeP.add)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="lep-3") Lebensenergie (maximal zukaufbar)
												input.form-control.text-center#lep-3(name="modifikatoren[LeP][max]", type="number", min="0", step="1", value=_Held.modifikatoren.LeP.max)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label Ausdauer:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												label.sr-only(for="aup-1") Ausdauer (Startwert)
												input.form-control.text-center#aup-1(name="modifikatoren[AuP][start]", type="number", min="0", step="1", value=_Held.modifikatoren.AuP.start)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="aup-2") Ausdauer (zugekauft)
												input.form-control.text-center#aup-2(name="modifikatoren[AuP][add]", type="number", min="0", step="1", value=_Held.modifikatoren.AuP.add)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="aup-3") Ausdauer (maximal zukaufbar)
												input.form-control.text-center#aup-3(name="modifikatoren[AuP][max]", type="number", min="0", step="1", value=_Held.modifikatoren.AuP.max)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label#asp(title="Zum (De-)Aktivieren klicken") Astralenergie:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												label.sr-only(for="asp-1") Astralenergie (Startwert)
												input.form-control.text-center#asp-1(name="modifikatoren[AsP][start]", type="number", step="1", value=_Held.modifikatoren.AsP.start)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="asp-2") Astralenergie (zugekauft)
												input.form-control.text-center#asp-2(name="modifikatoren[AsP][add]", type="number", min="0", step="1", value=_Held.modifikatoren.AsP.add)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="asp-3") Astralenergie (maximal zukaufbar)
												input.form-control.text-center#asp-3(name="modifikatoren[AsP][max]", type="number", min="0", step="1", value=_Held.modifikatoren.AsP.max)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label#kap(title="Zum (De-)Aktivieren klicken") Karmaenergie:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												label.sr-only(for="kap-1") Karmaenergie (Startwert)
												input.form-control.text-center#kap-1(name="modifikatoren[KaP][start]", type="number", min="0", step="1", value=_Held.modifikatoren.KaP.start)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="kap-2") Karmaenergie (zugekauft)
												input.form-control.text-center#kap-2(name="modifikatoren[KaP][add]", type="number", min="0", step="1", value=_Held.modifikatoren.KaP.add)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label Magieresistenz:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												label.sr-only(for="mr-1") Magieresistenz (Startwert)
												input.form-control.text-center#mr-1(name="modifikatoren[MR][start]", type="number", min="-10", max="10", step="1", value=_Held.modifikatoren.MR.start)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="mr-2") Magieresistenz (zugekauft)
												input.form-control.text-center#mr-2(name="modifikatoren[MR][add]", type="number", min="0", step="1", value=_Held.modifikatoren.MR.add)
											.col-sm-4.col-md-2.col-md-offset-2
												label.sr-only(for="mr-3") Magieresistenz (maximal zukaufbar)
												input.form-control.text-center#mr-3(name="modifikatoren[MR][max]", type="number", min="0", step="1", value=_Held.modifikatoren.MR.max)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label(for="ini-mod") Initiative:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												input#ini-mod.form-control.text-center(name="modifikatoren[INI]", type="number", step="1", value=_Held.modifikatoren.INI)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label(for="ws-mod") Wundschwelle:
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												input#ws-mod.form-control.text-center(name="modifikatoren[WS]", type="number", step="1", value=_Held.modifikatoren.WS)
							.row
								.form-group.container-fluid
									.col-sm-3.col-sm-offset-1
										label.control-label(for="gs-mod") Geschwindigkeit
									.col-sm-7.col-sm-offset-1
										.row
											.col-sm-4.col-md-2.col-md-offset-1
												input#gs-mod.form-control.text-center(name="modifikatoren[GS]", type="number", step="1", value=_Held.modifikatoren.GS)
				.well.text-center#save
					.row.dcm-row
						.col-sm-4.col-sm-offset-1
							button.form-control.btn.btn-success(type="submit", disabled) speichern
						.col-sm-4.col-sm-offset-2
							a.form-control.btn.btn-warning(href="/held/"+_Held._id) zurück
		script.
			$('#asp, #kap').on("click", function() {
				var $inputs = $(this).closest('.row').find('input');
				$inputs.prop('disabled', !$inputs.prop('disabled'));
			});
			if (#{!_Held.modifikatoren.AsP.max}) {
				$('#asp').closest('.row').find('input').prop('disabled', true);
			}
			if (#{!_Held.modifikatoren.KaP.start}) {
				$('#kap').closest('.row').find('input').prop('disabled', true);
			}
			$('button:disabled').prop('disabled', false);
